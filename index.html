<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Chat estilo WhatsApp</title>

<style>
body{
    margin:0;
    font-family: Arial, sans-serif;
    background:#e5ddd5;
    display:flex;
    flex-direction:column;
    height:100vh;
}

/* Header */
.header{
    background:#075e54;
    color:white;
    padding:15px;
    text-align:center;
    font-weight:bold;
}

/* Chat */
.chat{
    flex:1;
    padding:10px;
    overflow-y:auto;
}

/* Mensajes */
.msg{
    max-width:70%;
    padding:10px;
    margin:8px 0;
    border-radius:8px;
    position:relative;
    word-wrap:break-word;
}

.left{
    background:white;
    align-self:flex-start;
}

.right{
    background:#dcf8c6;
    align-self:flex-end;
}

/* Flecha */
.left::before{
    content:"";
    position:absolute;
    left:-8px;
    top:10px;
    border-right:8px solid white;
    border-top:8px solid transparent;
    border-bottom:8px solid transparent;
}

.right::after{
    content:"";
    position:absolute;
    right:-8px;
    top:10px;
    border-left:8px solid #dcf8c6;
    border-top:8px solid transparent;
    border-bottom:8px solid transparent;
}

/* Botón borrar */
.delete{
    position:absolute;
    top:2px;
    right:5px;
    font-size:12px;
    cursor:pointer;
    color:red;
}

/* Input */
.input-area{
    display:flex;
    padding:10px;
    background:#f0f0f0;
}

input{
    flex:1;
    padding:10px;
    border-radius:20px;
    border:1px solid #ccc;
    outline:none;
}

button{
    margin-left:10px;
    padding:10px 15px;
    border:none;
    border-radius:50%;
    background:#25d366;
    color:white;
    font-size:18px;
    cursor:pointer;
}
</style>
</head>

<body>

<div class="header">Chat</div>

<div class="chat" id="chat"></div>

<div class="input-area">
    <input type="text" id="msg" placeholder="Escribe un mensaje">
    <button onclick="send()">➤</button>
</div>

<script>
const chat = document.getElementById("chat");

/* Cargar mensajes */
let messages = JSON.parse(localStorage.getItem("chat")) || [];
messages.forEach(m => addMsg(m.text, m.side));

function send(){
    const input = document.getElementById("msg");
    if(input.value.trim() === "") return;

    addMsg(input.value, "right");
    messages.push({text: input.value, side:"right"});
    save();

    input.value = "";

    /* Respuesta automática */
    setTimeout(()=>{
        addMsg("Mensaje recibido", "left");
        messages.push({text:"Mensaje recibido", side:"left"});
        save();
    },500);
}

function addMsg(text, side){
    const div = document.createElement("div");
    div.className = "msg " + side;
    div.innerHTML = `<span class="delete">✖</span>${text}`;

    div.querySelector(".delete").onclick = ()=>{
        div.remove();
        messages = messages.filter(m => m.text !== text);
        save();
    };

    chat.appendChild(div);
    chat.scrollTop = chat.scrollHeight;
}

function save(){
    localStorage.setItem("chat", JSON.stringify(messages));
}
</script>

</body>
  </html>
